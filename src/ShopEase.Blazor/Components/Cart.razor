@using ShopEase.Blazor.Models

<section class="cart" aria-label="Shopping Cart">
    <h2>Shopping Cart</h2>
    <ul>
        @foreach (var item in Items)
        {
            <li>
                <span>@item.Product?.Name</span> - <span>@item.Product?.Price.ToString("C")</span> x <span>@item.Quantity</span>
                <button @onclick="() => RemoveFromCart(item)" aria-label="Remove @item.Product?.Name from cart">Remove</button>
            </li>
        }
    </ul>
    <p>Total: @Items.Sum(i => (i.Product?.Price ?? 0) * i.Quantity).ToString("C")</p>
</section>

@code {
    [Parameter]
    public List<CartItemDto> Items { get; set; } = new();
    [Parameter]
    public EventCallback<ProductDto> OnRemoveFromCart { get; set; }

    private async Task RemoveFromCart(CartItemDto item)
    {
        if (item.Product != null)
            await OnRemoveFromCart.InvokeAsync(item.Product);
    }
}
